---
import type { AppNavItemVM } from "@/lib/navigation/app-nav";

interface Props {
  items: AppNavItemVM[];
  activePathname: string;
}

const { items, activePathname } = Astro.props;

const isActivePath = (href: string) =>
  activePathname === href || activePathname.startsWith(`${href}/`);
---

<nav
  aria-label="Nawigacja aplikacji (mobile)"
  class="fixed bottom-0 left-0 right-0 z-40 border-t border-neutral-200 bg-white md:hidden"
>
  <div class="mx-auto grid max-w-5xl grid-cols-2">
    {items.map((item) => {
      const isActive = isActivePath(item.href);
      return (
        <a
          href={item.href}
          aria-current={isActive ? "page" : undefined}
          aria-label={item.ariaLabel}
          class={[
            "flex min-h-[56px] flex-col items-center justify-center gap-1 px-4 py-2 text-xs font-medium transition",
            isActive ? "text-neutral-900" : "text-neutral-500",
          ].join(" ")}
        >
          <span
            class={[
              "flex h-9 w-9 items-center justify-center rounded-full",
              isActive ? "bg-neutral-900 text-white" : "bg-neutral-100 text-neutral-500",
            ].join(" ")}
            aria-hidden="true"
          >
            {item.icon === "home" ? (
              <svg viewBox="0 0 24 24" class="h-4 w-4" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 10.5L12 3l9 7.5" />
                <path d="M5 9.5V20h14V9.5" />
                <path d="M9 20v-6h6v6" />
              </svg>
            ) : null}
            {item.icon === "leaf" ? (
              <svg viewBox="0 0 24 24" class="h-4 w-4" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M4 20c6-1 9-4 10-10 4 2 6 5 6 10-6 0-10 0-16 0Z" />
                <path d="M8 16c2-1 4-3 6-6" />
              </svg>
            ) : null}
          </span>
          <span>{item.label}</span>
          <span
            class={[
              "h-1 w-6 rounded-full",
              isActive ? "bg-neutral-900" : "bg-transparent",
            ].join(" ")}
            aria-hidden="true"
          />
        </a>
      );
    })}
  </div>
</nav>
